/**
 * ScrollMonitor v0.3.0-dev (https://github.com/swgrhck/scroll-monitor)
 * Copyright 2018 Chakwen Hong <swgrhck@gmail.com> (https://swgrhck.github.io/)
 * Licensed under MIT (https://github.com/swgrhck/scroll-monitor/blob/master/LICENSE)
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.scrollMonitor={})}(this,function(e){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var h,d,t,i,o,s,k,c,u,f,v,y,_,g,L,p,w=(h='[data-monitor~="scroll"]',d="monitorTarget",t="scroll",i="DOMContentLoaded",o=[Window,Element],s=new Map,k=new Set,c=function(){function E(e){l(this,E),e=e||window,E._checkTarget(e),s.has(e)&&s.get(e).destroy(),this._target=e,this._resolvers=new Set,this._subscribers=new Set,this._scrollMetric=E._resolveMetric(e),this._boundEventListener=this._onTargetScroll.bind(this),this._target.addEventListener(t,this._boundEventListener),s.set(e,this)}return r(E,[{key:"registerResolver",value:function(e){E._checkResolver(e),this._resolvers.add(e)}},{key:"unregisterResolver",value:function(e){this._resolvers.delete(e)}},{key:"subscribe",value:function(e){E._checkSubscriber(e),this._subscribers.add(e)}},{key:"unsubscribe",value:function(e){this._subscribers.delete(e)}},{key:"destroy",value:function(){s.delete(this._target),this._target.removeEventListener(t,this._boundEventListener),this._target=null,this._resolvers=null,this._subscribers=null,this._scrollMetric=null,this._boundEventListener=null}},{key:"_onTargetScroll",value:function(e){var t=this._scrollMetric;this._scrollMetric=E._resolveMetric(this._target);for(var r=[this._resolvers,k],n=0;n<r.length;n++){var i=r[n],o=!0,s=!1,l=void 0;try{for(var a,c=i[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var u=a.value.resolve(t,this._scrollMetric,e),f=!0,v=!1,h=void 0;try{for(var d,y=u[Symbol.iterator]();!(f=(d=y.next()).done);f=!0){var _=d.value,g=!0,L=!1,p=void 0;try{for(var w,b=this._subscribers[Symbol.iterator]();!(g=(w=b.next()).done);g=!0){w.value.dispatchEvent(_)}}catch(e){L=!0,p=e}finally{try{g||null==b.return||b.return()}finally{if(L)throw p}}}}catch(e){v=!0,h=e}finally{try{f||null==y.return||y.return()}finally{if(v)throw h}}}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}}}},{key:"target",get:function(){return this._target}},{key:"subscribers",get:function(){return new Set(this._subscribers)}},{key:"resolvers",get:function(){return new Set(this._resolvers)}}],[{key:"of",value:function(e){return E._checkTarget(e),s.has(e)?s.get(e):new E(e)}},{key:"registerResolver",value:function(e){this._checkResolver(e),k.add(e)}},{key:"unregisterResolver",value:function(e){k.delete(e)}},{key:"reset",value:function(){s.forEach(function(e){return e.destroy()}),k.clear()}},{key:"_initByData",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=document.querySelectorAll(h)[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value,s=o.dataset[d];if(s){var l=!0,a=!1,c=void 0;try{for(var u,f=document.querySelectorAll(s)[Symbol.iterator]();!(l=(u=f.next()).done);l=!0){var v=u.value;E.of(v).subscribe(o)}}catch(e){a=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(a)throw c}}}else E.of(window).subscribe(o)}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}},{key:"_resolveMetric",value:function(e){var t;if(e instanceof Window){var r=e.document.documentElement;t=new u(r.scrollHeight,r.scrollWidth,r.clientHeight,r.clientWidth,e.pageYOffset,e.pageXOffset)}else{if(!(e instanceof Element))throw new Error("Can not resolve ScrollMetric");t=new u(e.scrollHeight,e.scrollWidth,e.clientHeight,e.clientWidth,e.scrollTop,e.scrollLeft)}return t}},{key:"_checkTarget",value:function(e){for(var t=0;t<o.length;t++){if(e instanceof o[t])return}throw new Error("The target must be an instance of one in ".concat(o.map(function(e){return e.name}).join(", "),"!"))}},{key:"_checkSubscriber",value:function(e){if(!(e instanceof EventTarget))throw new Error("The subscriber must be an instance of EventTarget!")}},{key:"_checkResolver",value:function(e){if("function"!=typeof e.resolve)throw new Error("The resolver must have function resolve!")}},{key:"NAMESPACE",get:function(){return"scroll-monitor"}},{key:"monitorMap",get:function(){return new Map(s)}},{key:"resolvers",get:function(){return new Set(k)}}]),E}(),u=function(){function s(e,t,r,n,i,o){l(this,s),this._scrollHeight=e,this._scrollWidth=t,this._viewHeight=r,this._viewWidth=n,this._top=i,this._left=o}return r(s,[{key:"scrollHeight",get:function(){return this._scrollHeight}},{key:"scrollWidth",get:function(){return this._scrollWidth}},{key:"viewHeight",get:function(){return this._viewHeight}},{key:"viewWidth",get:function(){return this._viewWidth}},{key:"top",get:function(){return this._top}},{key:"left",get:function(){return this._left}}]),s}(),window.addEventListener(i,function(){c._initByData()}),c),b=(f='[data-monitor~="scroll-direction"]',v="scrollUpClasses",y="scrollDownClasses",_="scrollLeftClasses",g="scrollRightClasses",L={SCROLL_UP:"scroll.up.".concat(w.NAMESPACE),SCROLL_DOWN:"scroll.down.".concat(w.NAMESPACE),SCROLL_LEFT:"scroll.left.".concat(w.NAMESPACE),SCROLL_RIGHT:"scroll.right.".concat(w.NAMESPACE),DOM_CONTENT_LOADED:"DOMContentLoaded"},p=function(){function t(e){l(this,t),this._interval=void 0!==e?e:50,this._ticking=!1}return r(t,[{key:"resolve",value:function(e,t){var r=this,n=[];return this._ticking||(this._ticking=!0,setTimeout(function(){return r._ticking=!1},this._interval),t.top<e.top&&n.push(new Event(L.SCROLL_UP)),t.top>e.top&&n.push(new Event(L.SCROLL_DOWN)),t.left<e.left&&n.push(new Event(L.SCROLL_LEFT)),t.left>e.left&&n.push(new Event(L.SCROLL_RIGHT))),n}},{key:"interval",get:function(){return this._interval},set:function(e){this._interval=e}},{key:"eventTypes",get:function(){return[L.SCROLL_UP,L.SCROLL_DOWN,L.SCROLL_LEFT,L.SCROLL_RIGHT]}}],[{key:"_initByData",value:function(){function e(e){return(e=e||"").split(/\s+/g).filter(Boolean)}var t=!0,r=!1,n=void 0;try{for(var i,o=function(){var r=i.value,n={up:e(r.dataset[v]),down:e(r.dataset[y]),left:e(r.dataset[_]),right:e(r.dataset[g])};r.addEventListener(L.SCROLL_UP,function(){var e,t;(e=r.classList).add.apply(e,a(n.up)),(t=r.classList).remove.apply(t,a(n.down))}),r.addEventListener(L.SCROLL_DOWN,function(){var e,t;(e=r.classList).add.apply(e,a(n.down)),(t=r.classList).remove.apply(t,a(n.up))}),r.addEventListener(L.SCROLL_LEFT,function(){var e,t;(e=r.classList).add.apply(e,a(n.left)),(t=r.classList).remove.apply(t,a(n.right))}),r.addEventListener(L.SCROLL_RIGHT,function(){var e,t;(e=r.classList).add.apply(e,a(n.right)),(t=r.classList).remove.apply(t,a(n.left))})},s=document.querySelectorAll(f)[Symbol.iterator]();!(t=(i=s.next()).done);t=!0)o()}catch(e){r=!0,n=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw n}}}}]),t}(),window.addEventListener(L.DOM_CONTENT_LOADED,function(){w.registerResolver(new p),p._initByData()}),p);e.Monitor=w,e.ScrollDirectionResolver=b,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=scroll-monitor.umd.min.js.map