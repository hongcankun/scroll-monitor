/**
 * ScrollMonitor v0.1.0 (https://github.com/swgrhck/scroll-monitor)
 * Copyright 2018 Chakwen Hong <swgrhck@gmail.com> (https://swgrhck.github.io/)
 * Licensed under MIT (https://github.com/swgrhck/scroll-monitor/blob/master/LICENSE)
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.scrollMonitor={})}(this,function(e){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e){return(o=Object.getPrototypeOf||function(e){return e.__proto__})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var y,d,t,l,c,a,_,f,h,v,b,p,w,g,E=function(){function e(){i(this,e)}return n(e,[{key:"resolve",value:function(e,t,n){throw new Error("Method is not implemented. Instance must override this method to resolve scroll event!")}},{key:"eventTypes",get:function(){}}],[{key:"VERSION",get:function(){return"0.1.0"}},{key:"NAMESPACE",get:function(){return"scroll-monitor"}}]),e}(),k=(y='[data-monitor~="scroll"]',d="monitorTarget",t="scroll",l="DOMContentLoaded",c=[Window,Element],a=new Map,_=new Set,f=function(){function v(e){i(this,v),e=e||window,v._checkTarget(e),a.has(e)&&a.get(e).destroy(),this._target=e,this._subscribers=new Set,this._scrollMetric=v._resolveMetric(e),this._boundEventListener=this._onTargetScroll.bind(this),this._target.addEventListener(t,this._boundEventListener),a.set(e,this)}return n(v,[{key:"subscribe",value:function(e){v._checkSubscriber(e),this._subscribers.add(e)}},{key:"unsubscribe",value:function(e){this._subscribers.delete(e)}},{key:"destroy",value:function(){a.delete(this._target),this._target.removeEventListener(t,this._boundEventListener),this._target=null,this._subscribers=null,this._scrollMetric=null,this._boundEventListener=null}},{key:"_onTargetScroll",value:function(e){var t=this._scrollMetric;this._scrollMetric=v._resolveMetric(this._target);var n=!0,r=!1,o=void 0;try{for(var i,s=_[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value.resolve(t,this._scrollMetric,e);if(u&&u instanceof Event){var l=!0,c=!1,a=void 0;try{for(var f,h=this._subscribers[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){f.value.dispatchEvent(u)}}catch(e){c=!0,a=e}finally{try{l||null==h.return||h.return()}finally{if(c)throw a}}}}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}}}],[{key:"of",value:function(e){return v._checkTarget(e),a.has(e)?a.get(e):new v(e)}},{key:"registerResolver",value:function(e){this._checkResolver(e),_.add(e)}},{key:"unregisterResolver",value:function(e){_.delete(e)}},{key:"reset",value:function(){a.forEach(function(e){return e.destroy()}),_.clear()}},{key:"_initByData",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=document.querySelectorAll(y)[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value,s=i.dataset[d];if(s){var u=!0,l=!1,c=void 0;try{for(var a,f=document.querySelectorAll(s)[Symbol.iterator]();!(u=(a=f.next()).done);u=!0){var h=a.value;v.of(h).subscribe(i)}}catch(e){l=!0,c=e}finally{try{u||null==f.return||f.return()}finally{if(l)throw c}}}else v.of(window).subscribe(i)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},{key:"_resolveMetric",value:function(e){var t;if(e instanceof Window)t=new h(e.innerHeight,e.innerWidth,e.pageYOffset,e.pageXOffset);else{if(!(e instanceof Element))throw new Error("Can not resolve ScrollMetric");t=new h(e.scrollHeight,e.scrollWidth,e.scrollTop,e.scrollLeft)}return t}},{key:"_checkTarget",value:function(e){for(var t=0;t<c.length;t++){if(e instanceof c[t])return}throw new Error("The target must be an instance of one in ".concat(c.map(function(e){return e.name}).join(", "),"!"))}},{key:"_checkSubscriber",value:function(e){if(!(e instanceof EventTarget))throw new Error("The subscriber must be an instance of EventTarget!")}},{key:"_checkResolver",value:function(e){if(!(e instanceof E))throw new Error("The resolver must be an instance of Resolver!")}},{key:"VERSION",get:function(){return"0.1.0"}},{key:"monitorMap",get:function(){return new Map(a)}},{key:"resolvers",get:function(){return new Set(_)}}]),v}(),h=function(){function o(e,t,n,r){i(this,o),this._height=e,this._width=t,this._top=n,this._left=r}return n(o,[{key:"height",get:function(){return this._height}},{key:"width",get:function(){return this._width}},{key:"top",get:function(){return this._top}},{key:"left",get:function(){return this._left}}]),o}(),window.addEventListener(l,function(){f._initByData()}),f),L=(v='[data-monitor~="scroll-up"]',b="scrollUpClass",p="scroll-up",w={SCROLL_UP:"scroll.up.".concat(E.NAMESPACE),SCROLL_UP_OFF:"scroll.up.off.".concat(E.NAMESPACE),DOM_CONTENT_LOADED:"DOMContentLoaded"},g=function(e){function t(){return i(this,t),u(this,o(t).apply(this,arguments))}return n(t,[{key:"resolve",value:function(e,t){var n=e.top;return t.top<n?new Event(w.SCROLL_UP):new Event(w.SCROLL_UP_OFF)}},{key:"eventTypes",get:function(){return[w.SCROLL_UP,w.SCROLL_UP_OFF]}}],[{key:"_initByData",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=function(){var e=r.value,t=e.dataset[b]||p;e.addEventListener(w.SCROLL_UP,function(){e.classList.add(t)}),e.addEventListener(w.SCROLL_UP_OFF,function(){e.classList.remove(t)})},i=document.querySelectorAll(v)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)o()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"VERSION",get:function(){return"0.1.0"}}]),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");s(e.prototype,t&&t.prototype),t&&s(e,t)}(t,e),t}(E),window.addEventListener(w.DOM_CONTENT_LOADED,function(){k.registerResolver(new g),g._initByData()}),g);e.Resolver=E,e.Monitor=k,e.ScrollUp=L,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=scroll-monitor.umd.min.js.map