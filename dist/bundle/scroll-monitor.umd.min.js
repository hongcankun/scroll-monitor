/**
 * ScrollMonitor v0.1.0 (https://github.com/swgrhck/scroll-monitor)
 * Copyright 2018 Chakwen Hong <swgrhck@gmail.com> (https://swgrhck.github.io/)
 * Licensed under MIT (https://github.com/swgrhck/scroll-monitor/blob/master/LICENSE)
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.scrollMonitor={})}(this,function(e){"use strict";var r={createEvent:function(e,t){if(t=Object.assign({bubbles:!1,cancelable:!1,composed:!1},t),document.documentMode){var n=document.createEvent("Event");return n.initEvent(e,t.bubbles,t.cancelable),n}return new Event(e,t)}};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function c(e){return(c=Object.getPrototypeOf||function(e){return e.__proto__})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var d,y,t,l,a,f,_,v,b,h,p,E,w,g,k=function(){function e(){i(this,e)}return n(e,[{key:"resolve",value:function(e,t,n){throw new Error("Method is not implemented. Instance must override this method to resolve scroll event!")}},{key:"eventTypes",get:function(){}}],[{key:"VERSION",get:function(){return"0.1.0"}},{key:"NAMESPACE",get:function(){return"scroll-monitor"}}]),e}(),m=(d='[data-monitor~="scroll"]',y="monitorTarget",t="scroll",l="DOMContentLoaded",a=[Window,Element],f=new Map,_=new Set,v=function(){function h(e){i(this,h),e=e||window,h._checkTarget(e),f.has(e)&&f.get(e).destroy(),this._target=e,this._subscribers=new Set,this._scrollMetric=h._resolveMetric(e),this._boundEventListener=this._onTargetScroll.bind(this),this._target.addEventListener(t,this._boundEventListener),f.set(e,this)}return n(h,[{key:"subscribe",value:function(e){h._checkSubscriber(e),this._subscribers.add(e)}},{key:"unsubscribe",value:function(e){this._subscribers.delete(e)}},{key:"destroy",value:function(){f.delete(this._target),this._target.removeEventListener(t,this._boundEventListener),this._target=null,this._subscribers=null,this._scrollMetric=null,this._boundEventListener=null}},{key:"_onTargetScroll",value:function(e){var t=this._scrollMetric;this._scrollMetric=h._resolveMetric(this._target);var n=!0,r=!1,o=void 0;try{for(var i,c=_[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var u=i.value.resolve(t,this._scrollMetric,e);if(u&&u instanceof Event){var s=!0,l=!1,a=void 0;try{for(var f,v=this._subscribers[Symbol.iterator]();!(s=(f=v.next()).done);s=!0){f.value.dispatchEvent(u)}}catch(e){l=!0,a=e}finally{try{s||null==v.return||v.return()}finally{if(l)throw a}}}}}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}}}],[{key:"of",value:function(e){return h._checkTarget(e),f.has(e)?f.get(e):new h(e)}},{key:"registerResolver",value:function(e){this._checkResolver(e),_.add(e)}},{key:"unregisterResolver",value:function(e){_.delete(e)}},{key:"reset",value:function(){f.forEach(function(e){return e.destroy()}),_.clear()}},{key:"_initByData",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=document.querySelectorAll(d)[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value,c=i.dataset[y];if(c){var u=!0,s=!1,l=void 0;try{for(var a,f=document.querySelectorAll(c)[Symbol.iterator]();!(u=(a=f.next()).done);u=!0){var v=a.value;h.of(v).subscribe(i)}}catch(e){s=!0,l=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw l}}}else h.of(window).subscribe(i)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},{key:"_resolveMetric",value:function(e){var t;if(e instanceof Window)t=new b(e.innerHeight,e.innerWidth,e.pageYOffset,e.pageXOffset);else{if(!(e instanceof Element))throw new Error("Can not resolve ScrollMetric");t=new b(e.scrollHeight,e.scrollWidth,e.scrollTop,e.scrollLeft)}return t}},{key:"_checkTarget",value:function(e){for(var t=0;t<a.length;t++){if(e instanceof a[t])return}throw new Error("The target must be an instance of one in ".concat(a.map(function(e){return e.name}).join(", "),"!"))}},{key:"_checkSubscriber",value:function(t){var e=["addEventListener","removeEventListener","dispatchEvent"];if(!e.every(function(e){return t[e]instanceof Function}))throw new Error("The subscriber must have functions ".concat(e,"!"))}},{key:"_checkResolver",value:function(e){if(!(e instanceof k))throw new Error("The resolver must be an instance of Resolver!")}},{key:"VERSION",get:function(){return"0.1.0"}},{key:"monitorMap",get:function(){return new Map(f)}},{key:"resolvers",get:function(){return new Set(_)}}]),h}(),b=function(){function o(e,t,n,r){i(this,o),this._height=e,this._width=t,this._top=n,this._left=r}return n(o,[{key:"height",get:function(){return this._height}},{key:"width",get:function(){return this._width}},{key:"top",get:function(){return this._top}},{key:"left",get:function(){return this._left}}]),o}(),window.addEventListener(l,function(){v._initByData()}),v),L=(h='[data-monitor~="scroll-up"]',p="scrollUpClass",E="scroll-up",w={SCROLL_UP:"scroll.up.".concat(k.NAMESPACE),SCROLL_UP_OFF:"scroll.up.off.".concat(k.NAMESPACE),DOM_CONTENT_LOADED:"DOMContentLoaded"},g=function(e){function t(){return i(this,t),s(this,c(t).apply(this,arguments))}return n(t,[{key:"resolve",value:function(e,t){var n=e.top;return t.top<n?r.createEvent(w.SCROLL_UP):r.createEvent(w.SCROLL_UP_OFF)}},{key:"eventTypes",get:function(){return[w.SCROLL_UP,w.SCROLL_UP_OFF]}}],[{key:"_initByData",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=function(){var e=r.value,t=e.dataset[p]||E;e.addEventListener(w.SCROLL_UP,function(){e.classList.add(t)}),e.addEventListener(w.SCROLL_UP_OFF,function(){e.classList.remove(t)})},i=document.querySelectorAll(h)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)o()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"VERSION",get:function(){return"0.1.0"}}]),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");u(e.prototype,t&&t.prototype),t&&u(e,t)}(t,e),t}(k),window.addEventListener(w.DOM_CONTENT_LOADED,function(){m.registerResolver(new g),g._initByData()}),g);e.Util=r,e.Resolver=k,e.Monitor=m,e.ScrollUp=L,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=scroll-monitor.umd.min.js.map