/**
 * ScrollMonitor v0.1.0 (https://github.com/swgrhck/scroll-monitor)
 * Copyright 2018 Chakwen Hong <swgrhck@gmail.com> (https://swgrhck.github.io/)
 * Licensed under MIT (https://github.com/swgrhck/scroll-monitor/blob/master/LICENSE)
 */
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var Monitor=function(){var y='[data-monitor~="scroll"]',d="monitorTarget",t="scroll",e="DOMContentLoaded",r=[Window,Element],n=new Map,_=new Set,i=function(){function v(e){_classCallCheck(this,v),e=e||window,v._checkTarget(e),n.has(e)&&n.get(e).destroy(),this._target=e,this._subscribers=new Set,this._scrollMetric=v._resolveMetric(e),this._boundEventListener=this._onTargetScroll.bind(this),this._target.addEventListener(t,this._boundEventListener),n.set(e,this)}return _createClass(v,[{key:"subscribe",value:function(e){v._checkSubscriber(e),this._subscribers.add(e)}},{key:"unsubscribe",value:function(e){this._subscribers.delete(e)}},{key:"destroy",value:function(){n.delete(this._target),this._target.removeEventListener(t,this._boundEventListener),this._target=null,this._subscribers=null,this._scrollMetric=null,this._boundEventListener=null}},{key:"_onTargetScroll",value:function(e){var t=this._scrollMetric;this._scrollMetric=v._resolveMetric(this._target);var r=!0,n=!1,i=void 0;try{for(var o,s=_[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value.resolve(t,this._scrollMetric,e);if(l&&l instanceof Event){var a=!0,c=!1,u=void 0;try{for(var f,h=this._subscribers[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){f.value.dispatchEvent(l)}}catch(e){c=!0,u=e}finally{try{a||null==h.return||h.return()}finally{if(c)throw u}}}}}catch(e){n=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}}}],[{key:"of",value:function(e){return v._checkTarget(e),n.has(e)?n.get(e):new v(e)}},{key:"registerResolver",value:function(e){this._checkResolver(e),_.add(e)}},{key:"unregisterResolver",value:function(e){_.delete(e)}},{key:"reset",value:function(){n.forEach(function(e){return e.destroy()}),_.clear()}},{key:"_initByData",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=document.querySelectorAll(y)[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value,s=o.dataset[d];if(s){var l=!0,a=!1,c=void 0;try{for(var u,f=document.querySelectorAll(s)[Symbol.iterator]();!(l=(u=f.next()).done);l=!0){var h=u.value;v.of(h).subscribe(o)}}catch(e){a=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(a)throw c}}}else v.of(window).subscribe(o)}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}},{key:"_resolveMetric",value:function(e){var t;if(e instanceof Window)t=new o(e.innerHeight,e.innerWidth,e.pageYOffset,e.pageXOffset);else{if(!(e instanceof Element))throw new Error("Can not resolve ScrollMetric");t=new o(e.scrollHeight,e.scrollWidth,e.scrollTop,e.scrollLeft)}return t}},{key:"_checkTarget",value:function(e){for(var t=0;t<r.length;t++){if(e instanceof r[t])return}throw new Error("The target must be an instance of one in ".concat(r.map(function(e){return e.name}).join(", "),"!"))}},{key:"_checkSubscriber",value:function(t){var e=["addEventListener","removeEventListener","dispatchEvent"];if(!e.every(function(e){return t[e]instanceof Function}))throw new Error("The subscriber must have functions ".concat(e,"!"))}},{key:"_checkResolver",value:function(e){if(!(e instanceof Resolver))throw new Error("The resolver must be an instance of Resolver!")}},{key:"VERSION",get:function(){return"0.1.0"}},{key:"monitorMap",get:function(){return new Map(n)}},{key:"resolvers",get:function(){return new Set(_)}}]),v}(),o=function(){function i(e,t,r,n){_classCallCheck(this,i),this._height=e,this._width=t,this._top=r,this._left=n}return _createClass(i,[{key:"height",get:function(){return this._height}},{key:"width",get:function(){return this._width}},{key:"top",get:function(){return this._top}},{key:"left",get:function(){return this._left}}]),i}();return window.addEventListener(e,function(){i._initByData()}),i}();
//# sourceMappingURL=monitor.min.js.map