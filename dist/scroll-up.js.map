{"version":3,"sources":["../src/scroll-up.js"],"names":["ScrollUpResolver","VERSION","Selectors","SCROLL_UP_MONITOR","Data","TOGGLE_CLASS","DataDefault","Events","SCROLL_UP","Resolver","NAMESPACE","SCROLL_UP_OFF","DOM_CONTENT_LOADED","lastMetric","crtMetric","lastTop","top","crtTop","_createEvent","type","document","documentMode","event","createEvent","initEvent","Event","subscriber","toggleClass","dataset","addEventListener","classList","add","remove","querySelectorAll","window","Monitor","registerResolver","_initByData"],"mappings":";;;;;;;;;;;;;;;;;;AAGA;;;;;;AAOA,IAAMA,mBAAoB,YAAM;AAE9B,MAAMC,UAAU,OAAhB;AAEA,MAAMC,YAAY;AAChBC,uBAAmB;AADH,GAAlB;AAIA,MAAMC,OAAO;AACXC,kBAAc;AADH,GAAb;AAIA,MAAMC,cAAc;AAClBD,kBAAc;AADI,GAApB;AAIA,MAAME,SAAS;AACbC,mCAAwBC,SAASC,SAAjC,CADa;AAEbC,2CAAgCF,SAASC,SAAzC,CAFa;AAGbE,wBAAoB;AAHP,GAAf;;AAhB8B,MAsBxBZ,gBAtBwB;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,8BA0DpBa,UA1DoB,EA0DRC,SA1DQ,EA0DG;AAC7B,YAAIC,UAAUF,WAAWG,GAAzB;AACA,YAAIC,SAASH,UAAUE,GAAvB;;AACA,YAAIC,SAASF,OAAb,EAAsB;AACpB,iBAAOf,iBAAiBkB,YAAjB,CAA8BX,OAAOC,SAArC,CAAP;AACD,SAFD,MAEO;AACL,iBAAOR,iBAAiBkB,YAAjB,CAA8BX,OAAOI,aAArC,CAAP;AACD;AACF;AAlE2B;AAAA;AAAA,0BA4BX;AACf,eAAO,CAACJ,OAAOC,SAAR,EAAmBD,OAAOI,aAA1B,CAAP;AACD;AA9B2B;AAAA;AAAA,mCAgCRQ,IAhCQ,EAgCF;AACxB,YAAIC,SAASC,YAAb,EAA2B;AAAE;AAC3B,cAAMC,QAAQF,SAASG,WAAT,CAAqB,OAArB,CAAd;AACAD,gBAAME,SAAN,CAAgBL,IAAhB,EAAsB,KAAtB,EAA6B,KAA7B;AACA,iBAAOG,KAAP;AACD,SAJD,MAIO;AACL,iBAAO,IAAIG,KAAJ,CAAUN,IAAV,CAAP;AACD;AACF;AAED;;;;;AA1C4B;AAAA;AAAA,oCA8CP;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,gBACRO,UADQ;AAEjB,gBAAMC,cAAcD,WAAWE,OAAX,CAAmBxB,KAAKC,YAAxB,KAAyCC,YAAYD,YAAzE;AACAqB,uBAAWG,gBAAX,CAA4BtB,OAAOC,SAAnC,EAA8C,YAAM;AAClDkB,yBAAWI,SAAX,CAAqBC,GAArB,CAAyBJ,WAAzB;AACD,aAFD;AAGAD,uBAAWG,gBAAX,CAA4BtB,OAAOI,aAAnC,EAAkD,YAAM;AACtDe,yBAAWI,SAAX,CAAqBE,MAArB,CAA4BL,WAA5B;AACD,aAFD;AANiB;;AACnB,+BAAyBP,SAASa,gBAAT,CAA0B/B,UAAUC,iBAApC,CAAzB,8HAAiF;AAAA;AAQhF;AATkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUpB;AAxD2B;AAAA;AAAA,0BAwBP;AACnB,eAAOF,OAAP;AACD;AA1B2B;;AAAA;;AAAA;AAAA,IAsBCQ,QAtBD;;AAqE9ByB,SAAOL,gBAAP,CAAwBtB,OAAOK,kBAA/B,EAAmD,YAAM;AACvDuB,YAAQC,gBAAR,CAAyB,IAAIpC,gBAAJ,EAAzB;;AACAA,qBAAiBqC,WAAjB;AACD,GAHD;AAKA,SAAOrC,gBAAP;AACD,CA3EwB,EAAzB","sourcesContent":["import Resolver from './resolver'\nimport Monitor from './monitor'\n\n/**\n * ----------------------------------------------------------------------------------\n * ScrollMonitor (v0.1.0): scroll-up.js\n * Licensed under MIT (https://github.com/swgrhck/scroll-monitor/blob/master/LICENSE)\n * ----------------------------------------------------------------------------------\n */\n\nconst ScrollUpResolver = (() => {\n\n  const VERSION = '0.1.0'\n\n  const Selectors = {\n    SCROLL_UP_MONITOR: '[data-monitor~=\"scroll-up\"]'\n  }\n\n  const Data = {\n    TOGGLE_CLASS: 'scrollUpClass'\n  }\n\n  const DataDefault = {\n    TOGGLE_CLASS: 'scroll-up'\n  }\n\n  const Events = {\n    SCROLL_UP: `scroll.up.${Resolver.NAMESPACE}`,\n    SCROLL_UP_OFF: `scroll.up.off.${Resolver.NAMESPACE}`,\n    DOM_CONTENT_LOADED: 'DOMContentLoaded'\n  }\n\n  class ScrollUpResolver extends Resolver {\n\n    static get VERSION() {\n      return VERSION\n    }\n\n    get eventTypes() {\n      return [Events.SCROLL_UP, Events.SCROLL_UP_OFF]\n    }\n\n    static _createEvent(type) {\n      if (document.documentMode) { // if IE\n        const event = document.createEvent('Event')\n        event.initEvent(type, false, false)\n        return event\n      } else {\n        return new Event(type)\n      }\n    }\n\n    /**\n     * Add class toggle event listeners those respond to events of {@link ScrollUpResolver} to subscribers by data attributes.\n     * This function can NOT be invoked repeatedly safely, event listeners will be registered repeatedly.\n     */\n    static _initByData() {\n      for (const subscriber of document.querySelectorAll(Selectors.SCROLL_UP_MONITOR)) {\n        const toggleClass = subscriber.dataset[Data.TOGGLE_CLASS] || DataDefault.TOGGLE_CLASS\n        subscriber.addEventListener(Events.SCROLL_UP, () => {\n          subscriber.classList.add(toggleClass)\n        })\n        subscriber.addEventListener(Events.SCROLL_UP_OFF, () => {\n          subscriber.classList.remove(toggleClass)\n        })\n      }\n    }\n\n    resolve(lastMetric, crtMetric) {\n      let lastTop = lastMetric.top\n      let crtTop = crtMetric.top\n      if (crtTop < lastTop) {\n        return ScrollUpResolver._createEvent(Events.SCROLL_UP)\n      } else {\n        return ScrollUpResolver._createEvent(Events.SCROLL_UP_OFF)\n      }\n    }\n  }\n\n  window.addEventListener(Events.DOM_CONTENT_LOADED, () => {\n    Monitor.registerResolver(new ScrollUpResolver())\n    ScrollUpResolver._initByData()\n  })\n\n  return ScrollUpResolver\n})()\n\nexport default ScrollUpResolver\n"],"file":"scroll-up.js"}