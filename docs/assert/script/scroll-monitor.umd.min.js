/**
 * ScrollMonitor v0.4.0-dev (https://github.com/swgrhck/scroll-monitor)
 * Copyright 2018 Chakwen Hong <swgrhck@gmail.com> (https://swgrhck.github.io/)
 * Licensed under MIT (https://github.com/swgrhck/scroll-monitor/blob/master/LICENSE)
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.scrollMonitor={})}(this,function(t){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function d(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var n,i,o,s,c,l,_,y,g,L,p,w,E,u,b=(n="scroll",i=[Window,Element],o=new Map,s=function(){function l(t){a(this,l),t=t||window,l._checkTarget(t),o.has(t)&&o.get(t).destroy(),this._target=t,this._resolvers=new Set,this._scrollMetric=l._resolveMetric(t),this._boundEventListener=this._onTargetScroll.bind(this),this._target.addEventListener(n,this._boundEventListener),o.set(t,this)}return e(l,[{key:"addResolver",value:function(t){if("function"!=typeof t.resolve)throw new Error("The resolver should have a function named resolve!");this._resolvers.add(t)}},{key:"removeResolver",value:function(t){return this._resolvers.delete(t)}},{key:"clearResolvers",value:function(){var t=this._resolvers;return this._resolvers=new Set,t}},{key:"destroy",value:function(){o.delete(this._target),this._target.removeEventListener(n,this._boundEventListener),this._target=null,this._resolvers=null,this._scrollMetric=null,this._boundEventListener=null}},{key:"_onTargetScroll",value:function(t){var e=this._scrollMetric;this._scrollMetric=l._resolveMetric(this._target);var n=!0,r=!1,i=void 0;try{for(var o,s=this._resolvers[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){o.value.resolve(e,this._scrollMetric,t)}}catch(t){r=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}},{key:"target",get:function(){return this._target}},{key:"resolvers",get:function(){return new Set(this._resolvers)}}],[{key:"of",value:function(t){return o.has(t)?o.get(t):new l(t)}},{key:"clear",value:function(){o.forEach(function(t){return t.destroy()})}},{key:"_resolveMetric",value:function(t){var e;if(t instanceof Window){var n=t.document.documentElement;e=new c(n.scrollHeight,n.scrollWidth,n.clientHeight,n.clientWidth,t.pageYOffset,t.pageXOffset)}else{if(!(t instanceof Element))throw new Error("Can not resolve ScrollMetric");e=new c(t.scrollHeight,t.scrollWidth,t.clientHeight,t.clientWidth,t.scrollTop,t.scrollLeft)}return e}},{key:"_checkTarget",value:function(t){for(var e=0;e<i.length;e++){if(t instanceof i[e])return}throw new Error("The target must be an instance of one in ".concat(i.map(function(t){return t.name}).join(", "),"!"))}},{key:"NAMESPACE",get:function(){return"scroll-monitor"}},{key:"monitors",get:function(){return new Map(o)}}]),l}(),c=function(){function s(t,e,n,r,i,o){a(this,s),this._scrollHeight=t,this._scrollWidth=e,this._viewHeight=n,this._viewWidth=r,this._top=i,this._left=o}return e(s,[{key:"scrollHeight",get:function(){return this._scrollHeight}},{key:"scrollWidth",get:function(){return this._scrollWidth}},{key:"viewHeight",get:function(){return this._viewHeight}},{key:"viewWidth",get:function(){return this._viewWidth}},{key:"top",get:function(){return this._top}},{key:"left",get:function(){return this._left}}]),s}(),s),f=(l='[data-monitor~="scroll-direction"]',_="target",y="interval",g="scrollUp",L="scrollDown",p="scrollLeft",w="scrollRight",E={SCROLL_UP:"scroll.up.".concat(b.NAMESPACE),SCROLL_DOWN:"scroll.down.".concat(b.NAMESPACE),SCROLL_LEFT:"scroll.left.".concat(b.NAMESPACE),SCROLL_RIGHT:"scroll.right.".concat(b.NAMESPACE),DOM_CONTENT_LOADED:"DOMContentLoaded"},u=function(){function v(t,e){a(this,v),this.subscriber=t,this.interval=e,this._ticking=!1}return e(v,[{key:"resolve",value:function(t,e){var n=this,r=[];this._ticking||(this._ticking=!0,setTimeout(function(){return n._ticking=!1},this._interval),e.top<t.top&&r.push(new Event(E.SCROLL_UP)),e.top>t.top&&r.push(new Event(E.SCROLL_DOWN)),e.left<t.left&&r.push(new Event(E.SCROLL_LEFT)),e.left>t.left&&r.push(new Event(E.SCROLL_RIGHT)));for(var i=0;i<r.length;i++){var o=r[i];this._subscriber.dispatchEvent(o)}}},{key:"subscriber",get:function(){return this._subscriber},set:function(t){if(!(t instanceof EventTarget))throw new Error("The subscriber must be an instance of EventTarget!");this._subscriber=t}},{key:"interval",get:function(){return this._interval},set:function(t){this._interval=Number(t)||50}},{key:"eventTypes",get:function(){return[E.SCROLL_UP,E.SCROLL_DOWN,E.SCROLL_LEFT,E.SCROLL_RIGHT]}}],[{key:"_initByData",value:function(){function f(t){return(t=t||"").split(/\s+/g).filter(Boolean)}var t=!0,e=!1,n=void 0;try{for(var h,r=function(){var n=h.value,t=n.dataset[y],e=n.dataset[_],r=e?document.querySelectorAll(e):[window],i=!0,o=!1,s=void 0;try{for(var l,a=r[Symbol.iterator]();!(i=(l=a.next()).done);i=!0){var c=l.value;b.of(c).addResolver(new v(n,t))}}catch(t){o=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(o)throw s}}var u={up:f(n.dataset[g]),down:f(n.dataset[L]),left:f(n.dataset[p]),right:f(n.dataset[w])};n.addEventListener(E.SCROLL_UP,function(){var t,e;(t=n.classList).add.apply(t,d(u.up)),(e=n.classList).remove.apply(e,d(u.down))}),n.addEventListener(E.SCROLL_DOWN,function(){var t,e;(t=n.classList).add.apply(t,d(u.down)),(e=n.classList).remove.apply(e,d(u.up))}),n.addEventListener(E.SCROLL_LEFT,function(){var t,e;(t=n.classList).add.apply(t,d(u.left)),(e=n.classList).remove.apply(e,d(u.right))}),n.addEventListener(E.SCROLL_RIGHT,function(){var t,e;(t=n.classList).add.apply(t,d(u.right)),(e=n.classList).remove.apply(e,d(u.left))})},i=document.querySelectorAll(l)[Symbol.iterator]();!(t=(h=i.next()).done);t=!0)r()}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}}]),v}(),window.addEventListener(E.DOM_CONTENT_LOADED,function(){u._initByData()}),u);t.Monitor=b,t.ScrollDirectionResolver=f,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=scroll-monitor.umd.min.js.map