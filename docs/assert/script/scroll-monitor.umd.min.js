/**
 * ScrollMonitor v0.6.0-dev (https://github.com/swgrhck/scroll-monitor)
 * Copyright 2018 Chakwen Hong <swgrhck@gmail.com> (https://swgrhck.github.io/)
 * Licensed under MIT (https://github.com/swgrhck/scroll-monitor/blob/master/LICENSE)
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.scrollMonitor={})}(this,function(t){"use strict";function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");i(t.prototype,e&&e.prototype),e&&i(t,e)}function o(t){return(o=Object.getPrototypeOf||function(t){return t.__proto__})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s,u,f,v,d,h,_,p,L,y,g,E,O,A,S,R,w,m,b,T,C,N,k,M,W,F,P,Y,B,H,I,j,D,G,x,U,q,X,z,J,K,Q,V,Z,$=(s="target",u="interval",f="scroll",v="DOMContentLoaded",d=[Window,Document,Element],h=new Map,_=function(){function r(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:50;l(this,r),this.subscriber=t,void 0!==e&&(e=0<Number(e)?Number(e):n,this._ticker={interval:e,ticking:!1})}return e(r,[{key:"resolve",value:function(t,e,n){var r=this,o=[];void 0!==this._ticker?this._ticker.ticking||(this._ticker.ticking=!0,setTimeout(function(){return r._ticker.ticking=!1},this._ticker.interval),this._doResolve(o,t,e,n)):this._doResolve(o,t,e,n),o.forEach(function(t){return r._subscriber.dispatchEvent(t)})}},{key:"_doResolve",value:function(t,e,n,r){}},{key:"subscriber",get:function(){return this._subscriber},set:function(t){if(!(t instanceof EventTarget))throw new Error("The subscriber must be an instance of EventTarget!");this._subscriber=t}}]),r}(),p=function(){function a(t){l(this,a),t=t||window,a._checkTarget(t),h.has(t)&&h.get(t).destroy(),this._target=t,this._resolvers=new Set,this._scrollMetric=a._resolveMetric(t),this._boundEventListener=this._onTargetScroll.bind(this),this._target.addEventListener(f,this._boundEventListener),h.set(t,this)}return e(a,[{key:"addResolver",value:function(t){if("function"==typeof t&&(t={resolve:t}),"function"!=typeof t.resolve)throw new Error("The resolver should have a function named resolve!");this._resolvers.add(t)}},{key:"removeResolver",value:function(t){return this._resolvers.delete(t)}},{key:"clearResolvers",value:function(){var t=this._resolvers;return this._resolvers=new Set,t}},{key:"destroy",value:function(){h.delete(this._target),this._target.removeEventListener(f,this._boundEventListener),this._target=null,this._resolvers=null,this._scrollMetric=null,this._boundEventListener=null}},{key:"_onTargetScroll",value:function(t){var e=this._scrollMetric;this._scrollMetric=a._resolveMetric(this._target);var n=!0,r=!1,o=void 0;try{for(var i,s=this._resolvers[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){i.value.resolve(e,this._scrollMetric,t)}}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}}},{key:"target",get:function(){return this._target}},{key:"resolvers",get:function(){return new Set(this._resolvers)}}],[{key:"of",value:function(t){return h.has(t)?h.get(t):new a(t)}},{key:"clear",value:function(){h.forEach(function(t){return t.destroy()})}},{key:"_resolveMetric",value:function(t){var e;if(t instanceof Window){var n=t.document.body;e=new L(n.scrollHeight,n.scrollWidth,n.clientHeight,n.clientWidth,t.pageYOffset,t.pageXOffset)}else{if(!(t instanceof Element))throw new Error("Can not resolve ScrollMetric");e=new L(t.scrollHeight,t.scrollWidth,t.clientHeight,t.clientWidth,t.scrollTop,t.scrollLeft)}return e}},{key:"_checkTarget",value:function(t){for(var e=0;e<d.length;e++){if(t instanceof d[e])return}throw new Error("The target must be an instance of one in ".concat(d.map(function(t){return t.name}).join(", "),"!"))}},{key:"Util",get:function(){return y}},{key:"BaseResolver",get:function(){return _}},{key:"NAMESPACE",get:function(){return"scroll-monitor"}},{key:"monitors",get:function(){return new Map(h)}}]),a}(),L=function(){function s(t,e,n,r,o,i){l(this,s),this._scrollHeight=t,this._scrollWidth=e,this._viewHeight=n,this._viewWidth=r,this._top=o,this._left=i}return e(s,[{key:"scrollHeight",get:function(){return this._scrollHeight}},{key:"scrollWidth",get:function(){return this._scrollWidth}},{key:"viewHeight",get:function(){return this._viewHeight}},{key:"viewWidth",get:function(){return this._viewWidth}},{key:"top",get:function(){return this._top}},{key:"left",get:function(){return this._left}},{key:"bottom",get:function(){return this._scrollHeight-this._top-this._viewHeight}},{key:"right",get:function(){return this._scrollWidth-this._left-this._viewWidth}}]),s}(),y={onLoaded:function(t){window.addEventListener(v,t)},splitString:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:/\s+/g;return(t=t||"").split(e).filter(Boolean)},getTargets:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:s,n=t.dataset[e];return n?document.querySelectorAll(n):[window]},getInterval:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:u;return t.dataset[e]}},p),tt=(g='[data-monitor~="scroll-direction"]',E="scrollUp",O="scrollDown",A="scrollLeft",S="scrollRight",R={SCROLL_UP:"scroll.up.".concat($.NAMESPACE),SCROLL_DOWN:"scroll.down.".concat($.NAMESPACE),SCROLL_LEFT:"scroll.left.".concat($.NAMESPACE),SCROLL_RIGHT:"scroll.right.".concat($.NAMESPACE)},w=$.Util,m=function(t){function s(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return l(this,s),a(this,o(s).call(this,t,e))}return e(s,[{key:"_doResolve",value:function(t,e,n){n.top<e.top&&t.push(new Event(R.SCROLL_UP)),n.top>e.top&&t.push(new Event(R.SCROLL_DOWN)),n.left<e.left&&t.push(new Event(R.SCROLL_LEFT)),n.left>e.left&&t.push(new Event(R.SCROLL_RIGHT))}}],[{key:"_initByData",value:function(){var t=!0,e=!1,n=void 0;try{for(var o,r=function(){var n=o.value,e=w.getInterval(n);w.getTargets(n).forEach(function(t){return $.of(t).addResolver(new s(n,e))});var r={up:w.splitString(n.dataset[E]),down:w.splitString(n.dataset[O]),left:w.splitString(n.dataset[A]),right:w.splitString(n.dataset[S])};n.addEventListener(R.SCROLL_UP,function(){var t,e;(t=n.classList).add.apply(t,c(r.up)),(e=n.classList).remove.apply(e,c(r.down))}),n.addEventListener(R.SCROLL_DOWN,function(){var t,e;(t=n.classList).add.apply(t,c(r.down)),(e=n.classList).remove.apply(e,c(r.up))}),n.addEventListener(R.SCROLL_LEFT,function(){var t,e;(t=n.classList).add.apply(t,c(r.left)),(e=n.classList).remove.apply(e,c(r.right))}),n.addEventListener(R.SCROLL_RIGHT,function(){var t,e;(t=n.classList).add.apply(t,c(r.right)),(e=n.classList).remove.apply(e,c(r.left))})},i=document.querySelectorAll(g)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)r()}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}}]),n(s,t),s}($.BaseResolver),w.onLoaded(function(){return m._initByData()}),m),et=(b='[data-monitor~="scroll-near"]',T="nearTop",C="nearBottom",N="nearLeft",k="nearRight",M="distanceTop",W="distanceBottom",F="distanceLeft",P="distanceRight",Y={SCROLL_NEAR_TOP:"scroll.near.top.".concat($.NAMESPACE),SCROLL_NEAR_BOTTOM:"scroll.near.bottom.".concat($.NAMESPACE),SCROLL_NEAR_LEFT:"scroll.near.left.".concat($.NAMESPACE),SCROLL_NEAR_RIGHT:"scroll.near.right.".concat($.NAMESPACE)},B=$.Util,H={top:100,bottom:100,left:100,right:100},I=function(t){function s(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length?arguments[2]:void 0;return l(this,s),(e=a(this,o(s).call(this,t,n,10)))._options=Object.assign({},H,r),e}return e(s,[{key:"_doResolve",value:function(t,e,n){n.top<e.top&&n.top<=this._options.top&&t.push(new Event(Y.SCROLL_NEAR_TOP)),n.top>e.top&&n.bottom<=this._options.bottom&&t.push(new Event(Y.SCROLL_NEAR_BOTTOM)),n.left<e.left&&n.left<=this._options.left&&t.push(new Event(Y.SCROLL_NEAR_LEFT)),n.left>e.left&&n.right<=this._options.right&&t.push(new Event(Y.SCROLL_NEAR_RIGHT))}}],[{key:"_initByData",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=function(){var n=i.value,e=B.getInterval(n),r={top:Number(n.dataset[M]),bottom:Number(n.dataset[W]),left:Number(n.dataset[F]),right:Number(n.dataset[P])};Object.keys(r).forEach(function(t){return(void 0===r[t]||Number.isNaN(r[t])||r[t]<0)&&delete r[t]}),B.getTargets(n).forEach(function(t){return $.of(t).addResolver(new s(n,e,r))});var o={top:B.splitString(n.dataset[T]),bottom:B.splitString(n.dataset[C]),left:B.splitString(n.dataset[N]),right:B.splitString(n.dataset[k])};n.addEventListener(Y.SCROLL_NEAR_TOP,function(){var t,e;(t=n.classList).add.apply(t,c(o.top)),(e=n.classList).remove.apply(e,c(o.bottom))}),n.addEventListener(Y.SCROLL_NEAR_BOTTOM,function(){var t,e;(t=n.classList).add.apply(t,c(o.bottom)),(e=n.classList).remove.apply(e,c(o.top))}),n.addEventListener(Y.SCROLL_NEAR_LEFT,function(){var t,e;(t=n.classList).add.apply(t,c(o.left)),(e=n.classList).remove.apply(e,c(o.right))}),n.addEventListener(Y.SCROLL_NEAR_RIGHT,function(){var t,e;(t=n.classList).add.apply(t,c(o.right)),(e=n.classList).remove.apply(e,c(o.left))})},o=document.querySelectorAll(b)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)r()}catch(t){e=!0,n=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}}}]),n(s,t),s}($.BaseResolver),B.onLoaded(function(){return I._initByData()}),I),nt=(j='[data-monitor~="scroll-away"]',D="awayTop",G="awayBottom",x="awayLeft",U="awayRight",q="distanceTop",X="distanceBottom",z="distanceLeft",J="distanceRight",K={SCROLL_AWAY_TOP:"scroll.away.top.".concat($.NAMESPACE),SCROLL_AWAY_TOP_OFF:"scroll.away.top.off.".concat($.NAMESPACE),SCROLL_AWAY_BOTTOM:"scroll.away.bottom.".concat($.NAMESPACE),SCROLL_AWAY_BOTTOM_OFF:"scroll.away.bottom.off.".concat($.NAMESPACE),SCROLL_AWAY_LEFT:"scroll.away.left.".concat($.NAMESPACE),SCROLL_AWAY_LEFT_OFF:"scroll.away.left.off.".concat($.NAMESPACE),SCROLL_AWAY_RIGHT:"scroll.away.right.".concat($.NAMESPACE),SCROLL_AWAY_RIGHT_OFF:"scroll.away.right.off.".concat($.NAMESPACE)},Q=$.Util,V={top:100,bottom:100,left:100,right:100},Z=function(t){function s(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length?arguments[2]:void 0;return l(this,s),(e=a(this,o(s).call(this,t,n,50)))._options=Object.assign({},V,r),e}return e(s,[{key:"_doResolve",value:function(t,e,n){n.top!==e.top&&(n.top>=this._options.top?t.push(new Event(K.SCROLL_AWAY_TOP)):t.push(new Event(K.SCROLL_AWAY_TOP_OFF)),n.bottom>=this._options.bottom?t.push(new Event(K.SCROLL_AWAY_BOTTOM)):t.push(new Event(K.SCROLL_AWAY_BOTTOM_OFF))),n.left!==e.left&&(n.left>=this._options.left?t.push(new Event(K.SCROLL_AWAY_LEFT)):t.push(new Event(K.SCROLL_AWAY_LEFT_OFF)),n.right>=this._options.right?t.push(new Event(K.SCROLL_AWAY_RIGHT)):t.push(new Event(K.SCROLL_AWAY_RIGHT_OFF)))}}],[{key:"_initByData",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=function(){var e=i.value,n=Q.getInterval(e),r={top:Number(e.dataset[q]),bottom:Number(e.dataset[X]),left:Number(e.dataset[z]),right:Number(e.dataset[J])};Object.keys(r).forEach(function(t){return(void 0===r[t]||Number.isNaN(r[t])||r[t]<0)&&delete r[t]}),Q.getTargets(e).forEach(function(t){return $.of(t).addResolver(new s(e,n,r))});var o={top:Q.splitString(e.dataset[D]),bottom:Q.splitString(e.dataset[G]),left:Q.splitString(e.dataset[x]),right:Q.splitString(e.dataset[U])};e.addEventListener(K.SCROLL_AWAY_TOP,function(){var t;(t=e.classList).add.apply(t,c(o.top))}),e.addEventListener(K.SCROLL_AWAY_TOP_OFF,function(){var t;(t=e.classList).remove.apply(t,c(o.top))}),e.addEventListener(K.SCROLL_AWAY_BOTTOM,function(){var t;(t=e.classList).add.apply(t,c(o.bottom))}),e.addEventListener(K.SCROLL_AWAY_BOTTOM_OFF,function(){var t;(t=e.classList).remove.apply(t,c(o.bottom))}),e.addEventListener(K.SCROLL_AWAY_LEFT,function(){var t;(t=e.classList).add.apply(t,c(o.left))}),e.addEventListener(K.SCROLL_AWAY_LEFT_OFF,function(){var t;(t=e.classList).remove.apply(t,c(o.left))}),e.addEventListener(K.SCROLL_AWAY_RIGHT,function(){var t;(t=e.classList).add.apply(t,c(o.right))}),e.addEventListener(K.SCROLL_AWAY_RIGHT_OFF,function(){var t;(t=e.classList).remove.apply(t,c(o.right))})},o=document.querySelectorAll(j)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)r()}catch(t){e=!0,n=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}}}]),n(s,t),s}($.BaseResolver),Q.onLoaded(function(){return Z._initByData()}),Z);t.Monitor=$,t.ScrollDirectionResolver=tt,t.ScrollNearResolver=et,t.ScrollAwayResolver=nt,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=scroll-monitor.umd.min.js.map